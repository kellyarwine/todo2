// Comprehensive tests for CheckoutProcessor
// Run with: npm test

const CheckoutProcessor = require('./checkout-processor');

console.log('CheckoutProcessor Test Suite');
console.log('============================');
console.log('This test suite demonstrates the tax calculation bug');
console.log('that affects EU users and other regions not in taxRates.');
console.log('');

// Test results will be shown by the test-runner.js
// This file serves as documentation of the test approach.

module.exports = {
  description: `
Test Coverage:
- Tax calculation for supported regions (US, CA)
- Tax calculation for unsupported regions (EU countries) - BUG
- Currency mapping for all supported currencies
- Default currency fallback
- Payment processing for supported regions
- Payment processing failure for unsupported regions - BUG
- Edge cases: zero subtotal, negative subtotal
- Data integrity: cart.total becomes NaN for unsupported regions
- Payment data format: amount becomes "NaN" string for EU users

The bug occurs because:
1. calculateTax() uses undefined taxRates[region] for EU countries
2. undefined * number = NaN
3. cart.total = subtotal + NaN = NaN  
4. NaN.toFixed(2) = "NaN"
5. Payment API receives amount: "NaN" and fails
  `
};
